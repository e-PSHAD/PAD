{"version":3,"file":"mycourses_nav.min.js","sources":["../src/mycourses_nav.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manage the timeline view navigation for the overview block.\n * This has the same behavior as the original without saving user preferences.\n *\n * @see /block_myoverview/view_nav module for original code.\n */\n\ndefine(\n[\n    'jquery',\n    'core/custom_interaction_events',\n    'block_myoverview/view',\n    'block_myoverview/selectors'\n],\nfunction(\n    $,\n    CustomEvents,\n    View,\n    Selectors\n) {\n\n    var SELECTORS = {\n        FILTERS: '[data-region=\"filter\"]',\n        FILTER_OPTION: '[data-filter]',\n        DISPLAY_OPTION: '[data-display-option]'\n    };\n\n    /**\n     * Event listener for the Display filter (cards, list).\n     *\n     * @param {object} root The root element for the overview block\n     */\n    var registerSelector = function(root) {\n\n        var Selector = root.find(SELECTORS.FILTERS);\n\n        CustomEvents.define(Selector, [CustomEvents.events.activate]);\n        Selector.on(\n            CustomEvents.events.activate,\n            SELECTORS.FILTER_OPTION,\n            function(e, data) {\n                var option = $(e.target);\n\n                if (option.hasClass('active')) {\n                    // If it's already active then we don't need to do anything.\n                    return;\n                }\n\n                var filter = option.attr('data-filter');\n                var customfieldvalue = option.attr('data-customfieldvalue');\n\n                root.find(Selectors.courseView.region).attr('data-' + filter, option.attr('data-value'));\n\n                if (customfieldvalue) {\n                    root.find(Selectors.courseView.region).attr('data-customfieldvalue', customfieldvalue);\n                }\n\n                // Reset the views.\n                View.init(root);\n\n                data.originalEvent.preventDefault();\n            }\n        );\n\n        CustomEvents.define(Selector, [CustomEvents.events.activate]);\n        Selector.on(\n            CustomEvents.events.activate,\n            SELECTORS.DISPLAY_OPTION,\n            function(e, data) {\n                var option = $(e.target);\n\n                if (option.hasClass('active')) {\n                    return;\n                }\n\n                root.find(Selectors.courseView.region).attr('data-display', option.attr('data-value'));\n                View.reset(root);\n                data.originalEvent.preventDefault();\n            }\n        );\n    };\n\n    /**\n     * Initialise the timeline view navigation by adding event listeners to\n     * the navigation elements.\n     *\n     * @param {object} root The root element for the myoverview block\n     */\n    var init = function(root) {\n        root = $(root);\n        registerSelector(root);\n    };\n\n    return {\n        Selectors: SELECTORS,\n        init: init\n    };\n});\n"],"names":["define","$","CustomEvents","View","Selectors","SELECTORS","FILTERS","FILTER_OPTION","DISPLAY_OPTION","init","root","Selector","find","events","activate","on","e","data","option","target","hasClass","filter","attr","customfieldvalue","courseView","region","originalEvent","preventDefault","reset","registerSelector"],"mappings":"AAsBAA,+CACA,CACI,SACA,iCACA,wBACA,+BAEJ,SACIC,EACAC,aACAC,KACAC,eAGIC,UAAY,CACZC,QAAS,yBACTC,cAAe,gBACfC,eAAgB,+BAqEb,CACHJ,UAAWC,UACXI,KAPO,SAASC,OAxDG,SAASA,UAExBC,SAAWD,KAAKE,KAAKP,UAAUC,SAEnCJ,aAAaF,OAAOW,SAAU,CAACT,aAAaW,OAAOC,WACnDH,SAASI,GACLb,aAAaW,OAAOC,SACpBT,UAAUE,eACV,SAASS,EAAGC,UACJC,OAASjB,EAAEe,EAAEG,YAEbD,OAAOE,SAAS,eAKhBC,OAASH,OAAOI,KAAK,eACrBC,iBAAmBL,OAAOI,KAAK,yBAEnCZ,KAAKE,KAAKR,UAAUoB,WAAWC,QAAQH,KAAK,QAAUD,OAAQH,OAAOI,KAAK,eAEtEC,kBACAb,KAAKE,KAAKR,UAAUoB,WAAWC,QAAQH,KAAK,wBAAyBC,kBAIzEpB,KAAKM,KAAKC,MAEVO,KAAKS,cAAcC,qBAI3BzB,aAAaF,OAAOW,SAAU,CAACT,aAAaW,OAAOC,WACnDH,SAASI,GACLb,aAAaW,OAAOC,SACpBT,UAAUG,gBACV,SAASQ,EAAGC,UACJC,OAASjB,EAAEe,EAAEG,QAEbD,OAAOE,SAAS,YAIpBV,KAAKE,KAAKR,UAAUoB,WAAWC,QAAQH,KAAK,eAAgBJ,OAAOI,KAAK,eACxEnB,KAAKyB,MAAMlB,MACXO,KAAKS,cAAcC,qBAa3BE,CADAnB,KAAOT,EAAES"}